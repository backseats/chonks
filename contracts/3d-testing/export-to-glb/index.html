
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - exporter - gltf</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link type="text/css" rel="stylesheet" href="main.css">
	</head>
	<body>
		<!-- <div id="info">
			<a href="https://threejs.org" target="_blank" rel="noopener">three.js</a> webgl - exporter - gltf
		</div> -->

		<script type="importmap">
			{
				"imports": {
					"three": "https://threejs.org/build/three.module.js",
					"three/addons/": "https://threejs.org/examples/jsm/"
				}
			}
		</script>

		<script type="module">

			import * as THREE from 'three';

			import { GLTFExporter } from 'three/addons/exporters/GLTFExporter.js';
			import { GUI } from 'three/addons/libs/lil-gui.module.min.js';
			import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

			function exportGLTF( input, filename = 'scene') {

				const gltfExporter = new GLTFExporter();

				const options = {
					trs: params.trs,
					onlyVisible: params.onlyVisible,
					binary: params.binary,
					maxTextureSize: params.maxTextureSize
				};
				gltfExporter.parse(
					input,
					function ( result ) {

						if ( result instanceof ArrayBuffer ) {

							saveArrayBuffer( result,  `${filename}.glb` );

						} else {

							const output = JSON.stringify( result, null, 2 );
							console.log( output );
							saveString( output,  `${filename}.gltf` );

						}

					},
					function ( error ) {

						console.log( 'An error happened during parsing', error );

					},
					options
				);

			}

			const link = document.createElement( 'a' );
			link.style.display = 'none';
			document.body.appendChild( link ); // Firefox workaround, see #6594

			function save( blob, filename ) {

				link.href = URL.createObjectURL( blob );
				link.download = filename;
				link.click();

				// URL.revokeObjectURL( url ); breaks Firefox...

			}

			function saveString( text, filename ) {

				save( new Blob( [ text ], { type: 'text/plain' } ), filename );

			}


			function saveArrayBuffer( buffer, filename ) {

				save( new Blob( [ buffer ], { type: 'application/octet-stream' } ), filename );

			}

			let container;

			let camera, object, object2, object3, material, material2, material3, geometry, scene1, bodyGroup, shirtGroup, pantsGroup, cubesGroup, scene2, renderer;
			let gridHelper, sphere, model, coffeemat, cube;

			let CHONK, zBody, zShirt;

			const params = {
				trs: false,
				onlyVisible: true,
				binary: true,
				maxTextureSize: 4096,
				exportChonk: exportChonk,
			};

			// const bodyZMap = "0b1705efb15e0c1705efb15e101705efb15e111705efb15e0b1605efb15e0c1605efb15e0d1605efb15e0f1605efb15e101605efb15e111605efb15e0b1505efb15e0c1505efb15e0d1505efb15e0e1505efb15e0f1505efb15e101505efb15e111505efb15e091405efb15e0a1405d697430b1405efb15e0c1405efb15e0d1405efb15e0e1405efb15e0f1405efb15e101405efb15e111405efb15e121405d69743131405efb15e091305efb15e0a1305d697430b1305efb15e0c1305efb15e0d1305efb15e0e1305efb15e0f1305efb15e101305efb15e111305efb15e121305d69743131305efb15e091205efb15e0a1205efb15e0b1205efb15e0c1205d697430d1205efb15e0e1205efb15e0f1205efb15e101205d69743111205efb15e121205efb15e131205efb15e0a1105efb15e0b1105efb15e0c1105efb15e0d1105efb15e0e1105efb15e0f1105efb15e101105efb15e111105efb15e121105efb15e0b1706efb15e0c1706efb15e101706efb15e111706efb15e0b1504efb15e0c1504efb15e0d1504efb15e0e1504efb15e0f1504efb15e101504efb15e111504efb15e0b1404efb15e0c1404efb15e0d1404efb15e0e1404efb15e0f1404efb15e101404efb15e111404efb15e0b1304efb15e0c1304efb15e0d1304efb15e0e1304efb15e0f1304efb15e101304efb15e111304efb15e0b1204efb15e0c1204efb15e0d1204efb15e0e1204efb15e0f1204efb15e101204efb15e111204efb15e0b1104efb15e0c1104efb15e0d1104efb15e0e1104efb15e0f1104efb15e101104efb15e111104efb15e0b1005d697430c1005d697430d1005d697430e1005d697430f1005d69743101005d69743111005d697430b1004d697430c1004d697430d1004d697430e1004d697430f1004d69743101004d69743111004d697430b0f05efb15e0c0f05efb15e0d0f05efb15e0e0f05efb15e0f0f05efb15e100f05efb15e110f05efb15e120f05efb15e0a0e05efb15e0b0e05efb15e0c0e05efb15e0d0e05efb15e0e0e05efb15e0f0e05efb15e100e05efb15e110e05efb15e120e05efb15e130e05efb15e0a0d05efb15e0b0d05efb15e0c0d05efb15e0d0d05efb15e0e0d05efb15e0f0d05efb15e100d05efb15e110d05efb15e120d05efb15e130d05efb15e0a0c05efb15e0b0c05efb15e0c0c05efb15e0d0c05efb15e0e0c05efb15e0f0c05efb15e100c05efb15e110c05efb15e120c05efb15e130c05efb15e0a0b05efb15e0b0b05efb15e0c0b05efb15e0d0b05efb15e0e0b05efb15e0f0b05efb15e100b05efb15e110b05efb15e120b05efb15e130b05efb15e0a0a05efb15e0b0a05efb15e0c0a05efb15e0d0a05efb15e0e0a05efb15e0f0a05efb15e100a05efb15e110a05efb15e120a05efb15e130a05efb15e0b0905efb15e0c0905efb15e0d0905efb15e0e0905efb15e0f0905efb15e100905efb15e110905efb15e120905efb15e0b0f04efb15e0c0f04efb15e0d0f04efb15e0e0f04efb15e0f0f04efb15e100f04efb15e110f04efb15e120f04efb15e0a0e04efb15e0b0e04efb15e0c0e04efb15e0d0e04efb15e0e0e04efb15e0f0e04efb15e100e04efb15e110e04efb15e120e04efb15e130e04efb15e0a0d04efb15e0b0d04efb15e0c0d04efb15e0d0d04efb15e0e0d04efb15e0f0d04efb15e100d04efb15e110d04efb15e120d04efb15e130d04efb15e0a0c04efb15e0b0c04efb15e0c0c04efb15e0d0c04efb15e0e0c04efb15e0f0c04efb15e100c04efb15e110c04efb15e120c04efb15e130c04efb15e0a0b04efb15e0b0b04efb15e0c0b04efb15e0d0b04efb15e0e0b04efb15e0f0b04efb15e100b04efb15e110b04efb15e120b04efb15e130b04efb15e0a0a04efb15e0b0a04efb15e0c0a04efb15e0d0a04efb15e0e0a04efb15e0f0a04efb15e100a04efb15e110a04efb15e120a04efb15e130a04efb15e0b0904efb15e0c0904efb15e0d0904efb15e0e0904efb15e0f0904efb15e100904efb15e110904efb15e120904efb15e0b0f03efb15e0c0f03efb15e0d0f03efb15e0e0f03efb15e0f0f03efb15e100f03efb15e110f03efb15e0a0e03efb15e0b0e03efb15e0c0e03efb15e0d0e03efb15e0e0e03efb15e0f0e03efb15e100e03efb15e110e03efb15e120e03efb15e130e03efb15e0a0d03efb15e0b0d03efb15e0c0d03efb15e0d0d03efb15e0e0d03efb15e0f0d03efb15e100d03efb15e110d03efb15e120d03efb15e130d03efb15e0a0c03efb15e0b0c03efb15e0c0c03efb15e0d0c03efb15e0e0c03efb15e0f0c03efb15e100c03efb15e110c03efb15e120c03efb15e130c03efb15e0a0b03efb15e0b0b03efb15e0c0b03efb15e0d0b03efb15e0e0b03efb15e0f0b03efb15e100b03efb15e110b03efb15e120b03efb15e130b03efb15e0b0a03efb15e0c0a03efb15e0d0a03efb15e0e0a03efb15e0f0a03efb15e100a03efb15e110a03efb15e120a03efb15e0b0f06efb15e0c0f06efb15e0d0f06efb15e0e0f06efb15e0f0f06efb15e100f06efb15e110f06efb15e120f06efb15e0a0e06efb15e0b0e06efb15e0c0e06efb15e0d0e06efb15e0e0e06efb15e0f0e06efb15e100e06efb15e110e06efb15e120e06efb15e130e06efb15e0a0d06efb15e0b0d06efb15e0c0d06ffffff0d0d060000000e0d06d697430f0d06d69743100d06d69743110d06ffffff120d06000000130d06efb15e0a0c06efb15e0b0c06efb15e0c0c06ffffff0d0c060000000e0c06efb15e0f0c06efb15e100c06efb15e110c06ffffff120c06000000130c06efb15e0a0b06efb15e0b0b06efb15e0c0b06efb15e0d0b06efb15e0e0b06efb15e0f0b06efb15e100b06efb15e110b06efb15e120b06efb15e130b06efb15e0a0a06efb15e0b0a06efb15e0c0a06efb15e0d0a06efb15e0e0a06efb15e0f0a06efb15e100a06efb15e110a06efb15e120a06efb15e130a06efb15e0b0906efb15e0c0906efb15e0d0906efb15e0e0906efb15e0f0906efb15e100906efb15e110906efb15e120906efb15e090d05d69743090c05d69743";
			// can get this from ChonksMain.getBodyZMap(uint256 _tokenId)

			// const shirtZMap = "0b13060000000c13060000000d13060000000e13060000000f13060000001013060000001113060000001213060000000a13060000000913050000000912050000000a12060000000b12060000000d12060000000c12060000000e12060000001113040000001012060000000f12060000001112060000001212060000001213050000001313050000001312050000001212050000001211050000000b13050000000a13050000000a12050000000a11050000000b11060000000d11060000000e11060000000f11060000001011060000000c10060000000b1006000000111006000000121006000000131006000000130f06000000140f06000000140e06000000140e07000000140d07000000140d06000000140c07000000140c06000000140b07000000140b06000000140a07000000130a06000000130a070000001209060000001309070000001209070000001109070000001009070000000f09070000000e09070000000d09070000000c09070000000b09070000000a0a070000000a0b070000000a0c070000000a0d070000000a0e070000000b0f070000000c1106ffffff111106ffffff1211060000000b0a070000000b14060000000c14060000000d14060000000e14060000000f1406000000101406000000111406000000131306000000091306000000090b07000000090c07000000090d07000000090e07000000130f07000000090c06000000090c05000000090c04000000090c03000000090d06000000090d05000000090d04000000090d03000000090e06000000090e05000000090e040000000a0f060000000a0f050000000a0f04000000090b06000000090b05000000090b05000000090b05000000090b040000000a0a060000000a0a050000000a0a040000000a0b030000000b0b030000000b0a030000000b09060000000b09050000000b09040000000c09060000000c09050000000c09040000000d09060000000e09060000000f09060000001009060000001109060000000d09050000000d09040000000e09050000000e09040000000f09050000000f0904000000100904000000100905000000110905000000110904000000120904000000120905000000130a05000000130a040000000c0a030000000d0a030000000e0a030000000f0a03000000100a03000000110a03000000120a030000000c0b030000000d0b030000000e0b030000000f0b03000000100b03000000110b03000000120b03000000130b030000000a0c030000000a0d030000000a0e030000000b0c030000000b0d030000000b0e030000000b0f030000000c0c030000000c0d030000000c0f030000000c0e030000000d0c030000000d0d030000000d0e030000000d0f030000000e0c030000000e0d030000000e0e030000000e0f030000000f0c030000000f0d030000000f0e030000000f0f03000000100c03000000100d03000000100e03000000100f03000000110f03000000110c03000000110d03000000110e03000000120c03000000120d03000000120e03000000130c03000000130d03000000130e03000000130b04000000130c04000000130d04000000130e04000000120f05000000120f040000001111050000001114040000001014040000000f14040000000e14040000000d14040000000c14040000000b14050000000b14040000001013040000000f13040000000e13040000000d13040000000c13040000000b13040000000b12040000000c12040000000d12040000000e12040000000f12040000001012040000001112040000001111040000001011040000000f11040000000e11040000000d11040000000c11040000000b11040000001110040000001010040000000f10040000000e10040000000d10040000000c10040000000b10040000000b1005000000111005000000121005000000140c05000000140d05000000140e05000000140d04000000140e04000000130e05000000130b05000000";
			// can get this and others from ChonkTraits.getZMapForTokenId(uint256 _tokenId) : tokenId of the trait, which you can get from ChonksMain tokenURI

			// const pantsZMap = "0c120510b72c0c110510b72c10120510b72c10110510b72c0b130510b72c0c1305eecb190d130510b72c0e130510b72c0f130510b72c101305eecb1911130510b72c0b140510b72c0c140510b72c0d14052f96410e14052f96410f14052f964110140510b72c11140510b72c0b150510b72c0c150510b72c0d150510b72c0e150510b72c0f150510b72c10150510b72c11150510b72c0b160510b72c0c160510b72c0d160510b72c0f160510b72c10160510b72c11160510b72c11150410b72c10150410b72c0f150410b72c0e150410b72c0d150410b72c0b150410b72c0c150410b72c11140410b72c11130410b72c0b140410b72c0b130410b72c0c140410b72c0c130410b72c0d130410b72c0d140410b72c0e140410b72c0e130410b72c0f130410b72c0f140410b72c10140410b72c10130410b72c10120410b72c10110410b72c0c120410b72c0c110410b72c";

			const fullZMap = "0b17058A5E240c17058A5E241017058A5E241117058A5E240b16058A5E240c16058A5E240d16058A5E240f16058A5E241016058A5E241116058A5E240b15058A5E240c15058A5E240d15058A5E240e15058A5E240f15058A5E241015058A5E241115058A5E240914058A5E240a140577511E0b14058A5E240c14058A5E240d14058A5E240e14058A5E240f14058A5E241014058A5E241114058A5E2412140577511E1314058A5E240913058A5E240a130577511E0b13058A5E240c13058A5E240d13058A5E240e13058A5E240f13058A5E241013058A5E241113058A5E2412130577511E1313058A5E240912058A5E240a12058A5E240b12058A5E240c120577511E0d12058A5E240e12058A5E240f12058A5E2410120577511E1112058A5E241212058A5E241312058A5E240a11058A5E240b11058A5E240c11058A5E240d11058A5E240e11058A5E240f11058A5E241011058A5E241111058A5E241211058A5E240b17068A5E240c17068A5E241017068A5E241117068A5E240b15048A5E240c15048A5E240d15048A5E240e15048A5E240f15048A5E241015048A5E241115048A5E240b14048A5E240c14048A5E240d14048A5E240e14048A5E240f14048A5E241014048A5E241114048A5E240b13048A5E240c13048A5E240d13048A5E240e13048A5E240f13048A5E241013048A5E241113048A5E240b12048A5E240c12048A5E240d12048A5E240e12048A5E240f12048A5E241012048A5E241112048A5E240b11048A5E240c11048A5E240d11048A5E240e11048A5E240f11048A5E241011048A5E241111048A5E240b100577511E0c100577511E0d100577511E0e100577511E0f100577511E10100577511E11100577511E0b100477511E0c100477511E0d100477511E0e100477511E0f100477511E10100477511E11100477511E0b0f058A5E240c0f058A5E240d0f058A5E240e0f058A5E240f0f058A5E24100f058A5E24110f058A5E24120f058A5E240a0e058A5E240b0e058A5E240c0e058A5E240d0e058A5E240e0e058A5E240f0e058A5E24100e058A5E24110e058A5E24120e058A5E24130e058A5E240a0d058A5E240b0d058A5E240c0d058A5E240d0d058A5E240e0d058A5E240f0d058A5E24100d058A5E24110d058A5E24120d058A5E24130d058A5E240a0c058A5E240b0c058A5E240c0c058A5E240d0c058A5E240e0c058A5E240f0c058A5E24100c058A5E24110c058A5E24120c058A5E24130c058A5E240a0b058A5E240b0b058A5E240c0b058A5E240d0b058A5E240e0b058A5E240f0b058A5E24100b058A5E24110b058A5E24120b058A5E24130b058A5E240a0a058A5E240b0a058A5E240c0a058A5E240d0a058A5E240e0a058A5E240f0a058A5E24100a058A5E24110a058A5E24120a058A5E24130a058A5E240b09058A5E240c09058A5E240d09058A5E240e09058A5E240f09058A5E241009058A5E241109058A5E241209058A5E240b0f048A5E240c0f048A5E240d0f048A5E240e0f048A5E240f0f048A5E24100f048A5E24110f048A5E24120f048A5E240a0e048A5E240b0e048A5E240c0e048A5E240d0e048A5E240e0e048A5E240f0e048A5E24100e048A5E24110e048A5E24120e048A5E24130e048A5E240a0d048A5E240b0d048A5E240c0d048A5E240d0d048A5E240e0d048A5E240f0d048A5E24100d048A5E24110d048A5E24120d048A5E24130d048A5E240a0c048A5E240b0c048A5E240c0c048A5E240d0c048A5E240e0c048A5E240f0c048A5E24100c048A5E24110c048A5E24120c048A5E24130c048A5E240a0b048A5E240b0b048A5E240c0b048A5E240d0b048A5E240e0b048A5E240f0b048A5E24100b048A5E24110b048A5E24120b048A5E24130b048A5E240a0a048A5E240b0a048A5E240c0a048A5E240d0a048A5E240e0a048A5E240f0a048A5E24100a048A5E24110a048A5E24120a048A5E24130a048A5E240b09048A5E240c09048A5E240d09048A5E240e09048A5E240f09048A5E241009048A5E241109048A5E241209048A5E240b0f038A5E240c0f038A5E240d0f038A5E240e0f038A5E240f0f038A5E24100f038A5E24110f038A5E240a0e038A5E240b0e038A5E240c0e038A5E240d0e038A5E240e0e038A5E240f0e038A5E24100e038A5E24110e038A5E24120e038A5E24130e038A5E240a0d038A5E240b0d038A5E240c0d038A5E240d0d038A5E240e0d038A5E240f0d038A5E24100d038A5E24110d038A5E24120d038A5E24130d038A5E240a0c038A5E240b0c038A5E240c0c038A5E240d0c038A5E240e0c038A5E240f0c038A5E24100c038A5E24110c038A5E24120c038A5E24130c038A5E240a0b038A5E240b0b038A5E240c0b038A5E240d0b038A5E240e0b038A5E240f0b038A5E24100b038A5E24110b038A5E24120b038A5E24130b038A5E240b0a038A5E240c0a038A5E240d0a038A5E240e0a038A5E240f0a038A5E24100a038A5E24110a038A5E24120a038A5E240b0f068A5E240c0f068A5E240d0f068A5E240e0f068A5E240f0f068A5E24100f068A5E24110f068A5E24120f068A5E240a0e068A5E240b0e068A5E240c0e068A5E240d0e068A5E240e0e068A5E240f0e068A5E24100e068A5E24110e068A5E24120e068A5E24130e068A5E240a0d068A5E240b0d068A5E240c0d06ffffff0d0d060000000e0d0677511E0f0d0677511E100d0677511E110d06ffffff120d06000000130d068A5E240a0c068A5E240b0c068A5E240c0c06ffffff0d0c060000000e0c068A5E240f0c068A5E24100c068A5E24110c06ffffff120c06000000130c068A5E240a0b068A5E240b0b068A5E240c0b068A5E240d0b068A5E240e0b068A5E240f0b068A5E24100b068A5E24110b068A5E24120b068A5E24130b068A5E240a0a068A5E240b0a068A5E240c0a068A5E240d0a068A5E240e0a068A5E240f0a068A5E24100a068A5E24110a068A5E24120a068A5E24130a068A5E240b09068A5E240c09068A5E240d09068A5E240e09068A5E240f09068A5E241009068A5E241109068A5E241209068A5E24090d0577511E090c0577511E0b170559381c0c170559381c10170559381c11170559381c0b170659381c0c170659381c10170659381c11170659381c0b15050000000c15050000000d15050000000e15050000000f15050000001015050000001115050000000b16050000000d16050000000f16050000001116050000001115040000000f15040000001015040000000e15040000000d15040000000c15040000000b15040000000f16040000001116040000000d16040000000b16040000000a1105d1d1d10b11052e58bf0c11052e58bf0d11052e58bf0e11050000000f1105d1d1d11011050000001111052e58bf121105d1d1d1091205d1d1d10a1205d1d1d10b12052e58bf0c12052e58bf0d12052e58bf0e12052e58bf0f1205d1d1d11012052e58bf1112052e58bf121205d1d1d1131205d1d1d1091305d1d1d10a1305d1d1d10b13052e58bf0c13052e58bf0d13052e58bf0e13050000000f1305d1d1d11013050000001113052e58bf121305d1d1d1131305d1d1d10b14052e58bf0c14052e58bf0d14052e58bf0e14052e58bf0f1405d1d1d11014052e58bf1114052e58bf1111042e58bf1011042e58bf0f11042e58bf0e11042e58bf0d11042e58bf0c11042e58bf0b11042e58bf0b12042e58bf0b13042e58bf0c12042e58bf0d13042e58bf0e12042e58bf0d12042e58bf0c13042e58bf0f13042e58bf0f12042e58bf0e13042e58bf1012042e58bf1013042e58bf1112042e58bf1113042e58bf1014042e58bf1114042e58bf0f14042e58bf0d14042e58bf0e14042e58bf0b14042e58bf0c14042e58bf0b0806ca79000c0806ca79000d0806ca79000e0806ca79000f0806ca7900100806ca7900110806ca7900120806ca7900130806ca79000b0906ca79000c0906ca79000d0906ca79000e0906ca79000f0906ca7900100906ca7900110906ca7900120906ca7900130906ca79000a0a06ca79000b0a06ca79000c0a06ca79000d0a06ca79000e0a06ca79000f0a06ca7900100a06ca7900110a06ca7900120a06ca7900130a06ca79000a0b06ca79000b0b06ca79000a0c06ca79000a0d06ca79000a0a05e086000a0a04e086000b0905e086000b0904e086000a0b05e086000a0b04e086000a0b03e086000a0c04e086000a0c03e086000a0d03e086000a0d04e08600130a05e08600130a04e08600120905e08600120904e08600100905e08600110905e086000f0905e086000d0905e086000c0905e08600110904e08600100904e086000e0905e086000e0904e086000f0904e086000c0904e086000d0904e086000b0a03e086000c0a03e086000d0a03e086000e0a03e086000f0a03e08600100a03e08600110a03e08600120a03e086000b0b03e086000c0b03e086000d0b03e086000e0b03e086000f0b03e08600100b03e08600110b03e08600120b03e08600130b03e086000b0c03e086000c0c03e086000d0c03e086000e0c03e086000f0c03e08600100c03e08600110c03e08600120c03e08600130c03e086000b0d03e086000c0d03e086000d0d03e086000e0d03e086000f0d03e08600100d03e08600110d03e08600120d03e08600130d03e08600130b04e08600130e03e08600120e03e08600110e03e086000f0e03e08600100e03e086000e0e03e086000c0e03e086000d0e03e086000b0e03e086000a0e03e08600110f03e08600100f03e086000f0f03e086000e0f03e086000c0f03e086000d0f03e086000b0f03e086000b0705e086000c0705e086000d0705e086000e0705e086000f0705e08600100705e08600100605e086000d0605e08600110705e08600120705e08600120605e08600130705e086000a0805e086000a0905e08600130805e08600130905e08600120805e08600110805e08600100805e086000f0805e086000e0805e086000d0805e086000c0805e086000b0805e08600"

			init();

			function init() {

				function parseZColorMap(colorMap, group) {
					for (let i = 0; i < colorMap.length; i += 12) {
						const x = parseInt(colorMap.slice(i, i + 2), 16);
						const y = parseInt(colorMap.slice(i + 2, i + 4), 16);
						const z = parseInt(colorMap.slice(i + 4, i + 6), 16);
						const r = parseInt(colorMap.slice(i + 6, i + 8), 16);
						const g = parseInt(colorMap.slice(i + 8, i + 10), 16);
						const b = parseInt(colorMap.slice(i + 10, i + 12), 16);
						const color = (r << 16) + (g << 8) + b; //r << 16 shifts the red component 16 bits to the left.
						const adjustedX = x  - 14;
						const adjustedY = y + 14;
						const adjustedZ = z - 5;
						const invertedY = 29 - adjustedY; // Assuming a 30x30 grid, invert y
						addBox(group, color, adjustedX, invertedY, adjustedZ); //let's just make the middle of the body 5 for now
					}
				}

				container = document.createElement( 'div' );
				document.body.appendChild( container );


				scene1 = new THREE.Scene();
				scene1.background = new THREE.Color('#0D6E9D'); // Hex code for light blue
				scene1.name = 'Scene1';

				// ---------------------------------------------------------------------
				// Perspective Camera
				// ---------------------------------------------------------------------
				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
				camera.position.set( 20, 20, 0 );

				camera.name = 'PerspectiveCamera';
				scene1.add( camera );

				// ---------------------------------------------------------------------
				// Ambient light
				// ---------------------------------------------------------------------
				const ambientLight = new THREE.AmbientLight( 0xcccccc );
				ambientLight.name = 'AmbientLight';
				scene1.add( ambientLight );

				// ---------------------------------------------------------------------
				// DirectLight
				// ---------------------------------------------------------------------
				const dirLight = new THREE.DirectionalLight( 0xffffff, 3 );
				dirLight.target.position.set( 0, 0, - 1 );
				dirLight.add( dirLight.target );
				dirLight.lookAt( - 1, - 1, 0 );
				dirLight.name = 'DirectionalLight';
				scene1.add( dirLight );

				// ---------------------------------------------------------------------
				// Groups
				// ---------------------------------------------------------------------
	


				const geom = new THREE.BoxGeometry(1, 1, 1);

				function addBox( group, color, x, y, z ) {
				let mesh = new THREE.Mesh(geom, new THREE.MeshStandardMaterial({ color: color }))
				mesh.position.set( x, y, z );
				mesh.castShadow = true;
				mesh.receiveShadow = true;
				group.add( mesh );
				return mesh;
				}

				CHONK = new THREE.Group();
				CHONK.name = 'CHONK';
				CHONK.castShadow = false;
				CHONK.receiveShadow = false;

				bodyGroup = new THREE.Group();
				bodyGroup.name = 'Body';
				bodyGroup.castShadow = false;
				bodyGroup.receiveShadow = false;
				bodyGroup.rotateY(Math.PI / 2);

				shirtGroup = new THREE.Group();
				shirtGroup.name = 'Shirt';
				shirtGroup.castShadow = false;
				shirtGroup.receiveShadow = false;
				shirtGroup.rotateY(Math.PI / 2);

				pantsGroup = new THREE.Group();
				pantsGroup.name = 'Pants';
				pantsGroup.castShadow = false;
				pantsGroup.receiveShadow = false;
				pantsGroup.rotateY(Math.PI / 2);
				


				// parseZColorMap(bodyZMap, bodyGroup);
				// parseZColorMap(fullZMap, bodyGroup);
				// parseZColorMap(pantsZMap, pantsGroup);
				// parseZColorMap(shirtZMap, shirtGroup);

				// this order doesn't affect three.js output BUT DOES affect glb output - so inverse the order and put body last
				// CHONK.add( shirtGroup );
				// CHONK.add( pantsGroup );
				CHONK.add( bodyGroup );
				scene1.add( CHONK );

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.setAnimationLoop( animate );
				renderer.toneMapping = THREE.ACESFilmicToneMapping;
				renderer.toneMappingExposure = 1;

				container.appendChild( renderer.domElement );

				window.addEventListener( 'resize', onWindowResize );

				const gui = new GUI();

				let h = gui.addFolder( 'Export' );
				h.add( params, 'exportChonk' ).name( 'Export Chonk' );
				

				gui.open();

			}


			function exportChonk() {
				exportGLTF( CHONK, "CHONK" );
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );
			}

			//

			function animate() {

				const timer = Date.now() * 0.0001;

				// camera.position.x = Math.cos( timer ) * 800;
				// camera.position.z = Math.sin( timer ) * 800;

				camera.lookAt( scene1.position );
				renderer.render( scene1, camera );
			}

			// add OrbitControls
			const controls = new OrbitControls( camera, renderer.domElement );
			controls.enableDamping = true;
			controls.dampingFactor = 0.05;


		</script>

	</body>
</html>
